<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tennis for Two: Welcome to Gemini</title>
    <!-- Retro Font -->
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        /* --- RETRO ORANGE/AMBER STYLE --- */
        :root {
            --phosphor-main: #ff7700; /* Neon Orange */
            --phosphor-dim: #b35500;  /* Darker Orange */
            --bg-color: #0a0a0a;      /* Deep Black */
            --overlay-bg: rgba(20, 10, 0, 0.96);
        }

        body {
            background-color: var(--bg-color);
            color: var(--phosphor-main);
            font-family: 'VT323', monospace;
            margin: 0;
            padding: 20px 0 0 0;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            text-shadow: 0 0 6px var(--phosphor-dim);
            box-sizing: border-box;
        }

        /* Scanlines Effect */
        body::after {
            content: " ";
            display: block;
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 10, 10, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 100, 0, 0.06), rgba(255, 50, 0, 0.02), rgba(255, 150, 0, 0.06));
            z-index: 10;
            background-size: 100% 3px, 3px 100%;
            pointer-events: none;
        }

        /* HEADER */
        .main-header {
            text-align: center;
            margin-bottom: 10px;
            z-index: 5;
            text-transform: uppercase;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .main-header h1 {
            margin: 0;
            font-size: 3rem;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .main-header h2 {
            margin: 0;
            font-size: 1.5rem;
            color: var(--phosphor-dim);
            letter-spacing: 3px;
        }
        
        .gemini-logo-header {
            height: 40px;
            width: auto;
            /* Filter to make the uploaded image look orange/retro */
            filter: brightness(0) saturate(100%) invert(55%) sepia(85%) saturate(2000%) hue-rotate(10deg) brightness(100%) contrast(105%);
        }

        /* GAME CANVAS */
        #gameCanvas {
            border: 4px solid var(--phosphor-main);
            box-shadow: 0 0 25px var(--phosphor-dim);
            background-color: #000;
            width: 800px;
            height: 500px;
            max-width: 95vw;
            max-height: 65vh;
        }

        /* SCORE HUD */
        .hud {
            display: flex;
            justify-content: space-between;
            width: 800px;
            max-width: 95vw;
            margin: 10px 0;
            font-size: 1.8rem;
            z-index: 5;
        }

        /* MODALS (Overlay) */
        .modal-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--overlay-bg);
            z-index: 20;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .modal-content {
            width: 90%;
            max-width: 700px;
            border: 3px solid var(--phosphor-main);
            padding: 30px;
            box-shadow: 0 0 35px var(--phosphor-dim) inset;
            text-align: left;
            position: relative;
            background: rgba(0,0,0,0.8);
        }

        .hidden { display: none !important; }
        h3 { margin-top: 0; text-transform: uppercase; text-align: center; font-size: 2.2rem;}
        
        .btn {
            background: var(--phosphor-main);
            color: #000;
            font-family: 'VT323', monospace;
            font-size: 1.5rem;
            padding: 10px 30px;
            border: none;
            cursor: pointer;
            margin-top: 20px;
            display: block;
            width: 100%;
            text-align: center;
            font-weight: bold;
        }
        .btn:hover { background: #ffaa55; box-shadow: 0 0 20px var(--phosphor-main); }
        .btn:disabled { opacity: 0.3; cursor: not-allowed; }

        /* Instructions Box */
        .controls-box {
            border: 2px dashed var(--phosphor-dim);
            padding: 15px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.4rem;
        }

        /* Interactive Elements */
        .checklist-item { display: flex; align-items: center; margin: 15px 0; font-size: 1.3rem; cursor: pointer; }
        input[type="checkbox"] { margin-right: 15px; transform: scale(1.5); accent-color: var(--phosphor-main); }
        
        textarea {
            width: 100%; background: #000; color: var(--phosphor-main);
            border: 2px solid var(--phosphor-main); font-family: 'VT323', monospace;
            font-size: 1.2rem; padding: 10px; margin-top: 10px; box-sizing: border-box;
        }

        /* Images */
        .zally-corner {
            position: fixed;
            bottom: 20px; right: 20px;
            height: 80px;
            opacity: 0.9;
            z-index: 5;
            filter: sepia(1) hue-rotate(-30deg) saturate(3) contrast(1.2); 
        }

        .zally-win {
            height: 150px; display: block; margin: 0 auto 20px auto;
            animation: bounce 1s infinite;
            filter: sepia(1) hue-rotate(-30deg) saturate(3) contrast(1.2);
        }
        
        .gemini-icon-inline {
            height: 20px; width: auto; vertical-align: middle; margin-right: 5px;
            filter: brightness(0) saturate(100%) invert(55%) sepia(85%) saturate(2000%) hue-rotate(10deg) brightness(100%) contrast(105%);
        }

        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        /* Typewriter Response */
        .gemini-reply {
            margin-top: 15px; padding: 10px; border-left: 4px solid var(--phosphor-main);
            font-family: sans-serif; font-size: 1rem; color: #ffeebb; min-height: 40px;
            background: rgba(255, 120, 0, 0.1);
        }
        
        .info-pill {
            background: var(--phosphor-dim);
            color: #000;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 1rem;
            margin-right: 10px;
            vertical-align: middle;
        }

    </style>
</head>
<body>

    <!-- HEADER -->
    <header class="main-header">
        <h1>
            <img src="image_e01515.png" alt="" class="gemini-logo-header">
            WELCOME TO GEMINI
            <img src="image_e01515.png" alt="" class="gemini-logo-header">
        </h1>
        <h2>SERVE ‚Ä¢ RETURN ‚Ä¢ ITERATE ‚Ä¢ REITERATE</h2>
    </header>

    <!-- SCORE -->
    <div class="hud">
        <div>YOU</div>
        <div id="scoreBoard">0 - 0</div>
        <div>AI</div>
    </div>

    <!-- GAME CANVAS -->
    <canvas id="gameCanvas" width="800" height="500"></canvas>

    <!-- ZALLY REFEREE -->
    <img src="zally.png" alt="Zally Referee" class="zally-corner">

    <!-- START SCREEN -->
    <div id="screen-start" class="modal-overlay">
        <div class="modal-content">
            <h3>TENNIS FOR TWO: THE MATCH</h3>
            <p style="font-size: 1.3rem; text-align: center;">
                AI isn't magic, it's a conversation. <br>
                Just like tennis: You Serve, it Returns, then you Iterate.
            </p>
            
            <div class="controls-box">
                <strong>HOW TO PLAY:</strong><br>
                Use <strong>UP / DOWN ARROWS</strong> on your keyboard to move.<br>
                Score 1 point to unlock the next Gemini Lesson.
            </div>

            <button class="btn" onclick="startGame()">START MATCH >></button>
        </div>
    </div>

    <!-- LEVEL 1: THE SERVE (ACCESS) -->
    <div id="screen-level1" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>‚è∏Ô∏è PHASE 1: THE SERVE (Access)</h3>
            <p>Great start! To serve effectively, you need to know where the court is.</p>
            <p><strong>Did you know?</strong> Gemini is seamlessly integrated into your daily tools.</p>
            
            <div class="checklist-item">
                <label><input type="checkbox" id="chk1" onchange="validateLvl1()"> 1. Check Gmail/Docs side panel for the Gemini symbol <img src="image_e01515.png" class="gemini-icon-inline">.</label>
            </div>
            <div class="checklist-item">
                <label><input type="checkbox" id="chk2" onchange="validateLvl1()"> 2. Open <a href="https://gemini.google.com" target="_blank" style="color:var(--phosphor-main)">gemini.google.com</a> in a new tab.</label>
            </div>
            <div class="checklist-item">
                <label><input type="checkbox" id="chk3" onchange="validateLvl1()"> 3. Bookmark it now.</label>
            </div>

            <button id="btn-lvl1" class="btn" disabled onclick="resumeGame(2)">READY FOR PHASE 2 >></button>
        </div>
    </div>

    <!-- LEVEL 2: THE RETURN (TRANSLATION) -->
    <div id="screen-level2" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>‚è∏Ô∏è PHASE 2: THE RETURN (Language)</h3>
            <p>Gemini speaks <strong>over 40 languages</strong> (from French to Japanese). You don't need perfect English.</p>
            
            <p><strong>CHALLENGE:</strong> Paste a text in <strong>ANY language</strong> you want (your native language, a dialect, or just test it) and ask Gemini to "Polish for Business English".</p>
            
            <textarea id="prompt-lvl2" rows="3" placeholder="Paste your text here (e.g. in Italian, German, Spanish...)"></textarea>
            <button class="btn" onclick="runGeminiSim1()">SERVE PROMPT</button>
            
            <div id="reply-lvl2" class="gemini-reply hidden"></div>
            <button id="btn-lvl2" class="btn hidden" onclick="resumeGame(3)">GOOD RETURN! FINAL PHASE >></button>
        </div>
    </div>

    <!-- LEVEL 3: ITERATE & REITERATE -->
    <div id="screen-level3" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>‚è∏Ô∏è PHASE 3: ITERATE & REITERATE</h3>
            <p><span class="info-pill">THE SECRET SAUCE</span></p>
            <p>A good rally doesn't end after one hit. <strong>Never settle for the first answer.</strong></p>
            <p>The real value comes when you tell Gemini to adjust, shorten, or change tone. This is the <strong>Reiterate</strong> phase.</p>
            
            <p><strong>CHALLENGE:</strong> The previous output was good, but maybe too long. Ask Gemini to refine it.</p>
            <textarea id="prompt-lvl3" rows="2" placeholder="E.g., 'Make it shorter' or 'Make it more polite'..."></textarea>
            <button class="btn" onclick="runGeminiSim2()">REITERATE</button>

            <div id="reply-lvl3" class="gemini-reply hidden"></div>
            <button id="btn-lvl3" class="btn hidden" onclick="triggerWin()">WIN MATCH POINT</button>
        </div>
    </div>

    <!-- WIN SCREEN -->
    <div id="screen-win" class="modal-overlay hidden">
        <div class="modal-content" style="text-align: center;">
            <img src="zally.png" alt="Zally Winner" class="zally-win">
            <h3>üèÜ MATCH WON! üèÜ</h3>
            <h2 style="color:#fff; border-bottom: none;">SERVE ‚Ä¢ RETURN ‚Ä¢ ITERATE ‚Ä¢ REITERATE</h2>
            <p style="font-size: 1.4rem;">You are now ready to start your Gemini journey.</p>
            <p>Remember: It's not just a tool, it's a teammate.</p>
            <button class="btn" onclick="location.reload()">PLAY AGAIN</button>
        </div>
    </div>

    <script>
        // --- GAME ENGINE ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // Game State
        let gameRunning = false;
        let playerScore = 0;
        let cpuScore = 0;
        let currentLevel = 1; 
        
        // Input State
        const keys = {
            ArrowUp: false,
            ArrowDown: false
        };

        // Canvas Dimensions
        const CW = canvas.width;
        const CH = canvas.height;

        // --- ADJUSTED SETTINGS (KEYBOARD + EASIER AI + SMALLER PADDLES) ---
        const ball = { x: CW/2, y: CH/2, dx: 3.5, dy: 3.5, radius: 8 };
        
        // Player: Reduced height (150px -> ~105px), Speed for keyboard
        const player = { x: 15, y: CH/2 - 52, width: 15, height: 105, speed: 6, dy: 0 };
        
        // CPU: Reduced height, slower speed (3.0 -> 2.5) for easier win
        const cpu = { x: CW - 30, y: CH/2 - 52, width: 15, height: 105, speed: 2.5 };

        // KEYBOARD CONTROLS
        window.addEventListener('keydown', (e) => {
            if(keys.hasOwnProperty(e.code)) keys[e.code] = true;
        });
        
        window.addEventListener('keyup', (e) => {
            if(keys.hasOwnProperty(e.code)) keys[e.code] = false;
        });

        function resetBall() {
            ball.x = CW / 2;
            ball.y = CH / 2;
            ball.dx = -ball.dx; 
            ball.dy = (Math.random() * 4) - 2; 
        }

        function update() {
            if (!gameRunning) return;

            // Move Player (Keyboard)
            if (keys.ArrowUp && player.y > 0) {
                player.y -= player.speed;
            }
            if (keys.ArrowDown && player.y + player.height < CH) {
                player.y += player.speed;
            }

            // Move Ball
            ball.x += ball.dx;
            ball.y += ball.dy;

            // Bounce Top/Bottom
            if (ball.y + ball.radius > CH || ball.y - ball.radius < 0) {
                ball.dy = -ball.dy;
            }

            // Paddle Collision Player
            if (ball.x - ball.radius < player.x + player.width && 
                ball.y > player.y && ball.y < player.y + player.height) {
                ball.dx = Math.abs(ball.dx); 
                let deltaY = ball.y - (player.y + player.height / 2);
                ball.dy = deltaY * 0.15; 
            }

            // Paddle Collision CPU
            if (ball.x + ball.radius > cpu.x && 
                ball.y > cpu.y && ball.y < cpu.y + cpu.height) {
                ball.dx = -Math.abs(ball.dx);
            }

            // CPU AI (EASIER LOGIC)
            // AI only reacts if ball is on its half (x > CW/2) to make it beatable
            if (ball.x > CW / 2) {
                let cpuTargetY = ball.y - (cpu.height/2);
                if (cpu.y < cpuTargetY - cpu.speed) cpu.y += cpu.speed;
                else if (cpu.y > cpuTargetY + cpu.speed) cpu.y -= cpu.speed;
            }
            
            // Keep CPU in bounds
            if(cpu.y < 0) cpu.y = 0;
            if(cpu.y + cpu.height > CH) cpu.y = CH - cpu.height;

            // Scoring
            if (ball.x < 0) {
                cpuScore++;
                resetBall(); 
                updateScoreboard();
            } else if (ball.x > CW) {
                playerScore++;
                updateScoreboard();
                checkScoreTrigger(); 
                resetBall();
            }
        }

        const phosphorColor = getComputedStyle(document.documentElement).getPropertyValue('--phosphor-main').trim();
        const phosphorDim = getComputedStyle(document.documentElement).getPropertyValue('--phosphor-dim').trim();

        function draw() {
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, CW, CH);

            // Net
            ctx.strokeStyle = phosphorDim;
            ctx.lineWidth = 2;
            ctx.setLineDash([10, 15]);
            ctx.beginPath();
            ctx.moveTo(CW / 2, 0);
            ctx.lineTo(CW / 2, CH);
            ctx.stroke();
            ctx.setLineDash([]);

            // Ball
            ctx.shadowBlur = 15;
            ctx.shadowColor = phosphorColor;
            ctx.fillStyle = phosphorColor;
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
            ctx.fill();

            // Paddles
            ctx.fillRect(player.x, player.y, player.width, player.height);
            ctx.fillRect(cpu.x, cpu.y, cpu.width, cpu.height);
            ctx.shadowBlur = 0;

            if (gameRunning) {
                requestAnimationFrame(() => {
                    update();
                    draw();
                });
            }
        }

        function updateScoreboard() {
            document.getElementById('scoreBoard').innerText = `${playerScore} - ${cpuScore}`;
        }

        // --- GAMEFLOW LOGIC ---

        function checkScoreTrigger() {
            if (currentLevel === 1 && playerScore >= 1) {
                pauseGame();
                setTimeout(() => document.getElementById('screen-level1').classList.remove('hidden'), 500);
            }
            else if (currentLevel === 2 && playerScore >= 2) {
                pauseGame();
                setTimeout(() => document.getElementById('screen-level2').classList.remove('hidden'), 500);
            }
            else if (currentLevel === 3 && playerScore >= 3) {
                pauseGame();
                setTimeout(() => document.getElementById('screen-level3').classList.remove('hidden'), 500);
            }
        }

        function startGame() {
            document.getElementById('screen-start').classList.add('hidden');
            gameRunning = true;
            draw();
        }

        function pauseGame() {
            gameRunning = false;
        }

        function resumeGame(nextLevelIndex) {
            currentLevel = nextLevelIndex;
            playerScore = 0; 
            cpuScore = 0;
            updateScoreboard();
            document.querySelectorAll('.modal-overlay').forEach(el => el.classList.add('hidden'));
            gameRunning = true;
            resetBall();
            draw();
        }
        
        function triggerWin() {
             document.querySelectorAll('.modal-overlay').forEach(el => el.classList.add('hidden'));
             document.getElementById('screen-win').classList.remove('hidden');
        }

        // --- INTERACTION LOGIC ---

        // Level 1
        function validateLvl1() {
            const c1 = document.getElementById('chk1').checked;
            const c2 = document.getElementById('chk2').checked;
            const c3 = document.getElementById('chk3').checked;
            const btn = document.getElementById('btn-lvl1');
            if(c1 && c2 && c3) {
                btn.disabled = false;
                btn.innerText = "ACCESS GRANTED - PLAY SET 2 >>";
            }
        }

        // Level 2 (Universal Translation)
        function runGeminiSim1() {
            const input = document.getElementById('prompt-lvl2').value;
            if (input.length < 2) { alert("Please paste some text first!"); return; }
            
            const replyBox = document.getElementById('reply-lvl2');
            replyBox.classList.remove('hidden');
            replyBox.innerHTML = "‚ú® Detecting language... Translating... Polishing...";
            
            setTimeout(() => {
                replyBox.innerHTML = "<strong>Subject:</strong> Urgent: PO-12345 Delay Update<br><br>Dear Partner,<br>We noticed a 3-week delay on PO-12345. As this is critical for our Black Friday strategy, please provide an urgent status update.<br>Best,<br>Zalando Team";
                document.getElementById('btn-lvl2').classList.remove('hidden');
            }, 2000);
        }

        // Level 3 (Iterate)
        function runGeminiSim2() {
            const input = document.getElementById('prompt-lvl3').value;
            if (input.length < 3) { alert("Please enter a prompt!"); return; }
            
            const replyBox = document.getElementById('reply-lvl3');
            replyBox.classList.remove('hidden');
            replyBox.innerHTML = "‚ú® Re-iterating...";
            
            setTimeout(() => {
                replyBox.innerHTML = "<strong>Subject:</strong> PO-12345: Urgent Delay Check<br><br>Hi Team,<br>PO-12345 is 3 weeks late. This is a Black Friday blocker. Please advise ETA ASAP.<br>Thanks.";
                document.getElementById('btn-lvl3').classList.remove('hidden');
            }, 1500);
        }
        
        draw(); 

    </script>
</body>
</html>
